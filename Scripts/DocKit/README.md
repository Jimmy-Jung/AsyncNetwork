# DocKit ìƒ˜í”Œ ì•± ìƒì„± ìŠ¤í¬ë¦½íŠ¸

`@DocumentedType`ê³¼ `@APIRequest`ë¥¼ ì‚¬ìš©í•˜ëŠ” SwiftUI ë¬¸ì„œ ì•±ì„ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.

---

## ğŸ“Š ìŠ¤í¬ë¦½íŠ¸ ëª©ë¡

| ìŠ¤í¬ë¦½íŠ¸ | ê¸°ëŠ¥ | ì‚¬ìš© ì‹œì  |
|---------|------|----------|
| `CreateDocKitExample.swift` | ìƒ˜í”Œ ì•± ìë™ ìƒì„± | í”„ë¡œì íŠ¸ ì‹œì‘ ì‹œ |
| `GenerateTypeRegistration.swift` | @DocumentedType ë“±ë¡ ì½”ë“œ ìƒì„± | ë¹Œë“œ ì‹œ ìë™ ì‹¤í–‰ |
| `GenerateEndpoints.swift` | @APIRequest ìˆ˜ì§‘ ì½”ë“œ ìƒì„± | ë¹Œë“œ ì‹œ ìë™ ì‹¤í–‰ |

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### CreateDocKitExample.swift - ìƒ˜í”Œ ì•± ìƒì„±

```bash
cd /path/to/YourProject
swift Scripts/DocKit/CreateDocKitExample.swift
```

**ëŒ€í™”í˜• ì…ë ¥ ì˜ˆì‹œ**:
```
ğŸ“± ì•± ì´ë¦„: MyAPIDocumentation

ğŸ“ @DocumentedType ê²½ë¡œ: Sources/Domain
   ğŸ’¡ ì—¬ëŸ¬ ê°œëŠ” ','ë¡œ êµ¬ë¶„ (ì˜ˆ: Sources/Domain,Sources/Models)
   
ğŸ“¡ @APIRequest ê²½ë¡œ: Sources/Network
   ğŸ’¡ ìœ„ì™€ ê°™ìœ¼ë©´ Enter
   
ğŸ“‚ ì¶œë ¥ ê²½ë¡œ: DocKitExample

ğŸ”– Bundle ID ì ‘ë‘ì‚¬: com.mycompany

ğŸ¯ ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ? y
```

---

## ğŸ“± CreateDocKitExample.swift

### ê¸°ëŠ¥
- âœ… ëŒ€í™”í˜• ì…ë ¥ ëª¨ë“œ
- âœ… ê²½ë¡œ ìë™ ì •ê·œí™” (ì ˆëŒ€/ìƒëŒ€/í™ˆ ê²½ë¡œ)
- âœ… Tuist ëª¨ë“ˆ ìë™ ê°ì§€
- âœ… Placeholder íŒŒì¼ ìë™ ìƒì„±
- âœ… ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ìë™ ì„¤ì •

### ì‚¬ìš©ë²•

#### 1ï¸âƒ£ ëŒ€í™”í˜• ëª¨ë“œ (ê¶Œì¥)

```bash
swift Scripts/DocKit/CreateDocKitExample.swift
```

#### 2ï¸âƒ£ ëª…ë ¹ì¤„ ëª¨ë“œ

```bash
swift Scripts/DocKit/CreateDocKitExample.swift \
    --name MyAPIDocumentation \
    --sources Sources/Domain \
    --sources Sources/Network \
    --output DocKitExample \
    --bundle-id com.mycompany \
    --scripts ../../Scripts
```

### ì˜µì…˜

| ì˜µì…˜ | ì„¤ëª… |
|------|------|
| `--name` | ì•± ì´ë¦„ |
| `--sources` | @DocumentedType/@APIRequest ê²½ë¡œ (ì—¬ëŸ¬ ê°œ ê°€ëŠ¥) |
| `--output` | ì¶œë ¥ ê²½ë¡œ |
| `--bundle-id` | Bundle ID ì ‘ë‘ì‚¬ |
| `--scripts` | AsyncNetwork Scripts ê²½ë¡œ |

### ê²½ë¡œ ì§€ì •

ë‹¤ì–‘í•œ ê²½ë¡œ í˜•ì‹ ì§€ì›:

```bash
# ì ˆëŒ€ ê²½ë¡œ
/Users/username/Project/Sources/Domain

# ìƒëŒ€ ê²½ë¡œ
Sources/Domain
../MyProject/Sources/Network

# í™ˆ ê²½ë¡œ
~/Projects/MyApp/Sources/Domain
```

### Tuist ëª¨ë“ˆ ìë™ ê°ì§€

ê²½ë¡œì— `Project.swift`ê°€ ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ Tuist ëª¨ë“ˆë¡œ ì¸ì‹:

```bash
# ì˜ˆì‹œ: Data, Domainì´ Tuist ëª¨ë“ˆì¸ ê²½ìš°
ğŸ“ @DocumentedType ê²½ë¡œ: Projects/Domain
ğŸ“¡ @APIRequest ê²½ë¡œ: Projects/Data

# ê²°ê³¼: Project.swiftì— ìë™ ì¶”ê°€
dependencies: [
    .project(target: "Domain", path: "../../Projects/Domain"),
    .project(target: "Data", path: "../../Projects/Data"),
]
```

### ìƒì„±ë˜ëŠ” íŒŒì¼ êµ¬ì¡°

```
DocKitExample/
â”œâ”€â”€ Project.swift                    # Tuist í”„ë¡œì íŠ¸ ì •ì˜
â””â”€â”€ MyAPIDocumentation/
    â”œâ”€â”€ Sources/
    â”‚   â”œâ”€â”€ MyAPIDocumentationApp.swift
    â”‚   â”œâ”€â”€ TypeRegistration+Generated.swift  # ìë™ ìƒì„±
    â”‚   â””â”€â”€ Endpoints+Generated.swift         # ìë™ ìƒì„±
    â””â”€â”€ Resources/
```

### ì‹¤í–‰

```bash
cd DocKitExample
tuist generate
open MyAPIDocumentation.xcworkspace
# Cmd + Rë¡œ ì‹¤í–‰!
```

---

## ğŸ“ GenerateTypeRegistration.swift

### ê¸°ëŠ¥
- âœ… `@DocumentedType` ìë™ ìŠ¤ìº”
- âœ… `registerAllTypesGenerated()` ë©”ì„œë“œ ìƒì„±
- âœ… íƒ€ì„ìŠ¤íƒ¬í”„ ë° íƒ€ì… ê°œìˆ˜ ìë™ ê¸°ë¡
- âœ… ì œì™¸ ê²½ë¡œ ì§€ì› (.build, Derived ë“±)

### ì‚¬ìš©ë²•

```bash
swift Scripts/DocKit/GenerateTypeRegistration.swift \
    --project <ì†ŒìŠ¤ê²½ë¡œ> \
    --output <ì¶œë ¥íŒŒì¼> \
    --module <ëª¨ë“ˆëª…> \
    --target <íƒ€ê²Ÿëª…> \
    [--verbose]
```

### ì˜ˆì‹œ

```bash
swift Scripts/DocKit/GenerateTypeRegistration.swift \
    --project Sources/Domain \
    --project Sources/Models \
    --output Generated/TypeRegistration+Generated.swift \
    --module MyApp \
    --target MyAppApp \
    --verbose
```

### ì¶œë ¥ ì˜ˆì‹œ

```swift
//
//  TypeRegistration+Generated.swift
//  MyApp
//
//  Auto-generated by GenerateTypeRegistration.swift
//  Created on 2026-01-05T12:46:12Z
//
//  DO NOT EDIT MANUALLY
//

import AsyncNetworkCore

extension MyAppApp {
    /// ëª¨ë“  @DocumentedType íƒ€ì…ì„ ìë™ìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤
    ///
    /// - Note: ìƒì„±ëœ íƒ€ì… ìˆ˜: 37ê°œ
    func registerAllTypesGenerated() {
        _ = User.typeStructure
        _ = Post.typeStructure
        _ = Comment.typeStructure
        // ... (37ê°œ íƒ€ì…)
    }
}
```

### Xcode Build Phase í†µí•©

`Project.swift`ì— ì¶”ê°€:

```swift
scripts: [
    .pre(
        script: """
        set -e
        
        SCRIPTS_DIR="${SRCROOT}/../../Scripts"
        OUTPUT_DIR="${SRCROOT}/MyApp/Sources"
        
        xcrun --sdk macosx swift "$SCRIPTS_DIR/DocKit/GenerateTypeRegistration.swift" \\
            --project Sources/Domain \\
            --project Sources/Models \\
            --output "$OUTPUT_DIR/TypeRegistration+Generated.swift" \\
            --module "MyApp" \\
            --target "MyAppApp"
        """,
        name: "Generate Type Registration",
        basedOnDependencyAnalysis: false
    ),
]
```

---

## ğŸ“¡ GenerateEndpoints.swift

### ê¸°ëŠ¥
- âœ… `@APIRequest` ìë™ ìŠ¤ìº”
- âœ… `tags` ê¸°ë°˜ ì¹´í…Œê³ ë¦¬ ìë™ ë¶„ë¥˜
- âœ… `endpointsGenerated` static í”„ë¡œí¼í‹° ìƒì„±
- âœ… íƒ€ì„ìŠ¤íƒ¬í”„ ë° í†µê³„ ì •ë³´ ìë™ ê¸°ë¡
- âœ… ì œì™¸ ê²½ë¡œ ì§€ì›

### ì‚¬ìš©ë²•

```bash
swift Scripts/DocKit/GenerateEndpoints.swift \
    --project <ì†ŒìŠ¤ê²½ë¡œ> \
    --output <ì¶œë ¥íŒŒì¼> \
    --module <ëª¨ë“ˆëª…> \
    --target <íƒ€ê²Ÿëª…> \
    [--verbose]
```

### ì˜ˆì‹œ

```bash
swift Scripts/DocKit/GenerateEndpoints.swift \
    --project Sources/Network \
    --project Sources/API \
    --output Generated/Endpoints+Generated.swift \
    --module MyApp \
    --target MyAppApp \
    --verbose
```

### ì¶œë ¥ ì˜ˆì‹œ

```swift
//
//  Endpoints+Generated.swift
//  MyApp
//
//  Auto-generated by GenerateEndpoints.swift
//  Created on 2026-01-05T12:49:36Z
//
//  DO NOT EDIT MANUALLY
//

import AsyncNetworkDocKit

extension MyAppApp {
    /// ëª¨ë“  API Endpoint ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤
    ///
    /// - Note: ìƒì„±ëœ ì¹´í…Œê³ ë¦¬ ìˆ˜: 7ê°œ, ì´ Endpoint ìˆ˜: 16ê°œ
    static var endpointsGenerated: [String: [EndpointMetadata]] {
        [
            "Users": [
                GetUsersRequest.metadata,
                GetUserRequest.metadata,
                CreateUserRequest.metadata,
            ],
            "Posts": [
                GetPostsRequest.metadata,
                CreatePostRequest.metadata,
            ],
            // ... (7ê°œ ì¹´í…Œê³ ë¦¬)
        ]
    }
}
```

### Xcode Build Phase í†µí•©

`Project.swift`ì— ì¶”ê°€:

```swift
scripts: [
    .pre(
        script: """
        set -e
        
        SCRIPTS_DIR="${SRCROOT}/../../Scripts"
        OUTPUT_DIR="${SRCROOT}/MyApp/Sources"
        
        xcrun --sdk macosx swift "$SCRIPTS_DIR/DocKit/GenerateEndpoints.swift" \\
            --project Sources/Network \\
            --output "$OUTPUT_DIR/Endpoints+Generated.swift" \\
            --module "MyApp" \\
            --target "MyAppApp"
        """,
        name: "Generate Endpoints",
        basedOnDependencyAnalysis: false
    ),
]
```

---

## ğŸ”§ í†µí•© ì›Œí¬í”Œë¡œìš°

### ìƒˆ í”„ë¡œì íŠ¸ ì‹œì‘

```bash
# 1. AsyncNetwork ì„¤ì¹˜
swift package resolve

# 2. ìƒ˜í”Œ ì•± ìƒì„±
swift Scripts/DocKit/CreateDocKitExample.swift

# 3. ì…ë ¥
ì•± ì´ë¦„: MyAPIDocumentation
@DocumentedType ê²½ë¡œ: Sources/Domain
@APIRequest ê²½ë¡œ: Sources/Network
ì¶œë ¥ ê²½ë¡œ: DocKitExample

# 4. ì‹¤í–‰
cd DocKitExample
tuist generate
open *.xcworkspace
```

### ê¸°ì¡´ í”„ë¡œì íŠ¸ì— ì¶”ê°€

```bash
# 1. Scripts ë³µì‚¬
cp -r .build/checkouts/AsyncNetwork/Scripts ./Scripts

# 2. Project.swiftì— ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€
# (ìœ„ì˜ "Xcode Build Phase í†µí•©" ì°¸ê³ )

# 3. tuist generate í›„ ë¹Œë“œ
tuist generate
# Xcodeì—ì„œ ë¹Œë“œ ì‹œ ìë™ ìƒì„±ë¨
```

---

## ğŸ” ë¬¸ì œ í•´ê²°

### 1. "ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"

```bash
# AsyncNetworkê°€ ì œëŒ€ë¡œ ë‹¤ìš´ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
ls .build/checkouts/AsyncNetwork/Scripts/

# ì—†ë‹¤ë©´ resolve ë‹¤ì‹œ ì‹¤í–‰
swift package resolve
```

### 2. "@DocumentedTypeì„ ì°¾ì„ ìˆ˜ ì—†ìŒ"

ìŠ¤í¬ë¦½íŠ¸ëŠ” **ë””ë ‰í† ë¦¬** ë‹¨ìœ„ë¡œ ìŠ¤ìº”í•©ë‹ˆë‹¤:

```bash
# âœ… ì˜¬ë°”ë¥¸ ê²½ë¡œ (í´ë”)
--project Sources/Domain

# âŒ ì˜ëª»ëœ ê²½ë¡œ (íŒŒì¼)
--project Sources/Domain/Models.swift
```

### 3. "tuist generate í›„ ìƒì„± íŒŒì¼ì´ ì—†ìŒ"

Placeholder íŒŒì¼ì„ ë¨¼ì € ìƒì„±í•˜ì„¸ìš”:

```bash
# Placeholder íŒŒì¼ì´ ì—†ìœ¼ë©´ tuist generateê°€ ì¸ì‹í•˜ì§€ ëª»í•¨
touch MyApp/Sources/TypeRegistration+Generated.swift
touch MyApp/Sources/Endpoints+Generated.swift

# ì´ì œ tuist generate ì‹¤í–‰
tuist generate
```

### 4. "SDK ê´€ë ¨ ê²½ê³ "

```
warning: using sysroot for 'iPhoneSimulator' but targeting 'MacOSX'
```

**í•´ê²°**: `xcrun --sdk macosx swift` ì‚¬ìš© (ì´ë¯¸ ì ìš©ë¨)

### 5. "ê²½ë¡œì— ê³µë°±ì´ í¬í•¨ë˜ì–´ ì˜¤ë¥˜"

ê²½ë¡œì— ê³µë°±ì´ ìˆìœ¼ë©´ ë”°ì˜´í‘œë¡œ ê°ì‹¸ì„¸ìš”:

```bash
# âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
swift Scripts/DocKit/CreateDocKitExample.swift \
    --sources "My Project/Sources/Domain"

# ë˜ëŠ” ëŒ€í™”í˜• ëª¨ë“œ ì‚¬ìš© (ìë™ ì²˜ë¦¬)
swift Scripts/DocKit/CreateDocKitExample.swift
```

---

## ğŸ¯ ëª¨ë²” ì‚¬ë¡€

### 1. ê²½ë¡œ ì¡°ì§í™”

```
YourProject/
â”œâ”€â”€ Sources/
â”‚   â”œâ”€â”€ Domain/          # @DocumentedType
â”‚   â”‚   â””â”€â”€ Models/
â”‚   â”œâ”€â”€ Network/         # @APIRequest
â”‚   â”‚   â””â”€â”€ Requests/
â”‚   â””â”€â”€ YourApp/
â””â”€â”€ Scripts/             # ìƒì„± ìŠ¤í¬ë¦½íŠ¸ ë³µì‚¬
```

### 2. .gitignore ì„¤ì •

```gitignore
# ìë™ ìƒì„± íŒŒì¼ ì œì™¸
**/TypeRegistration+Generated.swift
**/Endpoints+Generated.swift
```

### 3. CI/CD í†µí•©

```yaml
# .github/workflows/build.yml
- name: Generate Code
  run: |
    swift Scripts/DocKit/GenerateTypeRegistration.swift \
        --project Sources/Domain \
        --output Generated/TypeRegistration+Generated.swift \
        --module MyApp \
        --target MyAppApp
    
    swift Scripts/DocKit/GenerateEndpoints.swift \
        --project Sources/Network \
        --output Generated/Endpoints+Generated.swift \
        --module MyApp \
        --target MyAppApp
```

---

**Made with â¤ï¸ by AsyncNetwork Team**

